---
templateKey: article
title: 'El primer paso en AWS Lambda, Funciones serverless'
date: '2020-05-26'
updated: '2020-05-26'
description: En este art铆culo vamos a aprender las bases de AWS Lambda creando un hola mundo de una funci贸n serverless.
tags:
  - AWS
  - Lambda
  - Serverless
category: AWS
image: /img/articulos/aws-lambda-primer-paso.jpg
published: true
---

import { Note } from '../../components/mdx';

## 驴Por qu茅 Serverless?

Serverless es la siguiente evoluci贸n de Computaci贸n en la nube 锔烩锔 (_Cloud Computing_).

### IaaS - Infraestructura como Servicio

Anteriormente la mejor alternativa que ten铆amos en AWS era EC2 (Elastic Cloud Computing). **EC2 es IaaS o infraestructura como servicio**. Es decir se puede renter un servidor de amazon con ciertas prestaciones y sobre este instalar todo lo que necesitamos para ejecutar nuestras aplicaciones. Con todas las ventajas de escalamiento bajo demanda.

La ventaja de utilizar EC2 es que podemos pagar solamente por los recursos que necesitamos y no debemos preocuparnos por el mantenimiento de hardware.

### FaaS - Funciones c omo Servicio

**FaaS** toma esta idea a煤n m谩s all谩. Ahora no solamente no debemos preocuparnos por el hardware en el que se ejecutan nuestras aplicaciones, si no ahora **no nos preocupamos ni el sistema operativo o runtime** que necesita para ejecutarse. Con una PaaS solamente nos preocupamos en nuestra aplicaci贸n.

Otra de las enormes ventajas de funciones Lambda o serverless es que **solamente pagamos por lo que consumimos**. Es decir solamente nos gener谩 un gasto por los recursos y el tiempo en que nuestras funciones se ejecutan. No pagamos por tiempo Idle.

Con FaaS, nosotros desplegamos c贸digo como funciones independientes y configuramos reglas para su ejecuci贸n.

## AWS Lambda

Lambda es la plataforma FaaS de Amazon.

![AWS Lambdas ](/img/articulos/aws-lambda-hola-mundo/faas.png)

### Creando nuestra priemro funci贸n Lambda

#### 1: Ingregar a la consosola de AWS Lambda

Vamos a [console.aws.amazon.com/lambda/](https://console.aws.amazon.com/lambda/), iniciamos sesi贸n de ser necesario.

#### 2: Creamos una nueva funci贸n

Dependiendo si ya hemos creado una funci贸n anteriormente nos encontramos con pantallas distintas, Pero en cualquiera damos click al bot贸n `Create function` para crear una nueva funci贸n.

![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-console.png)
![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-console-2.png)

### 3: Creamos la funci贸n:

Seleccionamos `Author from scratch`, le damos un nombre a nuestra funci贸n y yo quiero escribirla en **nodejs** as铆 que no cambiamos nada m谩s. Y creamos la funci贸n dandole click en `Create Function`
![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-1.png)

**Listo**, hemos creado nuestra primero funci贸n.
![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-2.png)

El c贸digo de la funci贸n se puede observar en la secci贸n `Function Code`.

```javascript
exports.handler = async (event) => {
  // TODO implement
  const response = {
    statusCode: 200,
    body: JSON.stringify('Hello from Lambda!'),
  };
  return response;
};
```

Lo que hace esto es simplemente responder a cualquier evento con el contenido de `response`.

### 4: Probando nuestra funci贸n

Para probar nuestra funci贸n, podemos encontrar en la parte superior la opcion `Test`. En esta configuramos el evento que es el par谩metro que le podemos enviar a nuestra funci贸n.

Cambiamos el objeto json por el siguiente, y luego creamos el evento de prueba.

```json
{
  "producto": "Computador",
  "categoria": "Tecnolog铆a",
  "precio": 10
}
```

![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-3.png)

Con el evento creado lo podemos observar el evento creado se encuentra en la parte superior junto a `Test`.
Al ejecutar la funci贸n nos retorna el resultado en el cuadro marcado como `Salida` junto con mucha informaci贸n util de la funci贸n como: el tiempo de ejecuci贸n, maxima memoria utilizada y el `Log output` que nos va a ser muy util para poder debugear nuestras funciones ya que es ah铆 en donde se muestra el `console.log()`.

![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-4.png)

Oficialmente **ya creaste tu primera funci贸n Lambda**. En los siguientes pasos aprenderaz a hacerla m谩s util.

### 5: (Extra) Utilizando datos del evento

Para acceder a las propiedades del evento como `producto` o `precio` que definimos en el `EventoPrueba` simplemente llamamos a sus propiedades.

`event` es simplemente un objecto `json` y lo podemos tranfromar como cualquier otro.

```javascript
exports.handler = async (event) => {
  console.log(`Producto: ${event.producto}`);
  console.log(`Categor铆a: ${event.categoria}`);
  console.log(`Precio: ${event.precio}`);

  const jsonResponse = {
    producto: event.producto,
    precio: event.precio,
  };

  const response = {
    statusCode: 200,
    body: JSON.stringify(jsonResponse),
  };
  return response;
};
```

Guardamos los cambios y nuevamente ejecutamos la prueba.

![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-5.png)

Podemos comprobar el resultado y como en la salida de la funci贸n, tanto en los logs.

### 6: (Extra) Configuaciones de la funci贸n lambda

En esta ultima secci贸n hablaremos brevemente como conectar nuestra funci贸n con otros servicios de AWS, pero esta configuraci贸n no la realizaremos en esta publicaci贸n.

#### Secci贸n `Designer`

![Consola Lambda](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-6.png)

En esta secci贸n podemos configurar 3 cosas:

- **Triggers**: Cuando se activa nuestra funci贸n. Puede conectarse con:
  - LLamada aplicaciones
  - Cambio en AWS S3
  - Cambio en AWS DynamoDB
  - Otros servcios externos
- **Layers**: Utilizado para importar paquetes pesados a nuestra funci贸n. Mejora el rendimiendo de las funciones.
- **Destinations**: Permite utilizar la salida de la funci贸n como entrada de:
  - Otra funci贸n
  - SNS (Simple Notification Service )
  - SQS (Simple Queue Service)

#### Entornos de variable

La secci贸n de Variables de Entorno se explica s贸lo. Aqu铆 podemos almacenar variables que no queremos quemarlas en el c贸digo. Un excelente ejemplo de esto son las llaves de apis.

![Lambda - Variables de entorno](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-7.png)

#### Tags -Etiquetas

Las etiquetas facilitan la administraci贸n de proyectos m谩s grandes. Esta informaci贸n no configura nada. Es unicamente para nosotros. En las etiquetas solemos encontrar datos como el entorno que esta desplegado y tal vez el proyecto al que pertenece.

![Lambda - Variables de entorno](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-8.png)

#### Configuraci贸n b谩sica

La siguiente configuraci贸n es una de las m谩s importante ya que esta determina la capacidad computacional y el costo.

![Lambda - Configuraci贸n b谩sica](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-9.png)

La capacidad computacional en las funciones Lambda esta ligado a la cantidad de RAM. Y la cantiadad de memoria va desde 128MB hasta 3GB.

El tiempo de ejecuci贸n m谩ximo denominado como _timeout_ tiene un l铆mite de 15 minutos.

Si en 谩lgun momento necesitamos ejecutar un m茅todo por m谩s de 15 minutos debemos utilizar servicios como `Step Functions`.

![Lambda - Configuraci贸n b谩sica](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-10.png)

#### Monitoreo

Esta secci贸n de monitoreo es muy util porque nos avisar谩 como se esta comportando nuestra funci贸n. Como observamos en la siguiente imagen podemos observar el n煤mero de invocaciones, la duraci贸n de las mismas entre otros datos.

![Lambda - Configuraci贸n b谩sica](/img/articulos/aws-lambda-hola-mundo/aws-lambda-creation-11.png)

---

<br />

## Felicidades 

隆Si llegaste hasta aqu铆 estoy seguro que **aprendiste bastante**!

Si te gusto y te aport贸 valor el post me gustar铆a mucho que lo compartas o me comentes en [Twitter](https://twitter.com/edzznR) c贸mo te parecio el post y si tienes alg煤n tema en espec铆fico que quisieras que cubra me gustar铆a conocerlo.
